<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>DevOps Workshop Demo App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      /* Background blobs */
      .blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(80px);
        opacity: 0.45;
        animation: blobFloat 25s infinite ease-in-out alternate;
      }
      @keyframes blobFloat {
        0% {
          transform: translate(0, 0) scale(1);
        }
        50% {
          transform: translate(120px, -80px) scale(1.4);
        }
        100% {
          transform: translate(-100px, 100px) scale(0.9);
        }
      }

      /* Pulsing status dot */
      .status-dot {
        animation: pulseDot 1.8s infinite ease-in-out;
      }
      @keyframes pulseDot {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.6);
          opacity: 0.4;
        }
      }

      /* Shimmer on “Running” */
      .running-glow {
        position: relative;
        overflow: hidden;
      }
      .running-glow::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          transparent 0%,
          rgba(255, 255, 255, 0.2) 50%,
          transparent 100%
        );
        transform: translateX(-100%);
        animation: shine 4s infinite;
      }
      @keyframes shine {
        0% {
          transform: translateX(-100%);
        }
        20% {
          transform: translateX(100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      /* Terminal typing cursor */
      .cursor {
        display: inline-block;
        width: 7px;
        height: 12px;
        background: #cbd5e1; /* slate-300 */
        margin-left: 2px;
        animation: blink 0.8s infinite;
      }
      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        50.01%,
        100% {
          opacity: 0;
        }
      }

      /* Hide scrollbar for logs */
      #log-output {
        overflow: hidden;
        position: relative;
        white-space: pre-wrap;
      }
    </style>
  </head>

  <body
    class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100"
  >
    <!-- Background blobs -->
    <div class="pointer-events-none absolute inset-0 overflow-hidden">
      <div
        class="blob bg-cyan-500/20 w-[400px] h-[400px] top-[-100px] left-[-80px]"
      ></div>
      <div
        class="blob bg-indigo-500/20 w-[350px] h-[350px] bottom-[-120px] right-[-100px] animation-delay-[5s]"
      ></div>
      <div
        class="blob bg-sky-300/20 w-[300px] h-[300px] top-[40%] left-[50%] animation-delay-[10s]"
      ></div>
    </div>

    <div
      class="relative min-h-screen flex items-center justify-center px-4 py-10"
    >
      <main class="relative max-w-5xl w-full mx-auto">
        <!-- HEADER -->
        <header class="mb-8">
          <div
            class="inline-flex items-center gap-2 rounded-full bg-slate-900/60 border border-slate-700/60 px-3 py-1 text-xs font-medium text-slate-300"
          >
            <span
              class="inline-block h-2 w-2 rounded-full bg-emerald-400 status-dot"
            ></span>
            Container running:
            <span class="font-semibold text-emerald-400 ml-1"
              >devops-workshop</span
            >
          </div>

          <h1
            class="mt-4 text-3xl sm:text-4xl md:text-5xl font-extrabold tracking-tight"
          >
            DevOps Workshop
            <span
              class="block bg-gradient-to-r from-cyan-400 via-sky-500 to-indigo-400 bg-clip-text text-transparent"
            >
              Demo Frontend
            </span>
          </h1>

          <p class="mt-3 max-w-xl text-sm sm:text-base text-slate-300">
            Served via
            <span class="font-semibold text-sky-400">yarn serve</span> inside an
            <span class="font-semibold text-indigo-400">Alpine Linux</span>
            container. Image:
            <span class="font-semibold text-emerald-400"
              >devops-workshop:latest</span
            >
          </p>
        </header>

        <!-- GRID -->
        <section
          class="grid gap-6 lg:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)]"
        >
          <!-- LEFT -->
          <div class="space-y-6">
            <div class="grid gap-4 sm:grid-cols-3">
              <div
                class="rounded-2xl border border-slate-700/70 bg-slate-900/70 px-4 py-3"
              >
                <p class="text-xs text-slate-400 mb-1">Container</p>
                <p class="text-sm font-semibold">devops-workshop</p>
                <p class="mt-3 flex items-center gap-2 text-xs text-slate-300">
                  <span
                    class="inline-block h-2 w-2 rounded-full bg-emerald-400 status-dot"
                  ></span>
                  Status:
                  <span class="font-semibold text-emerald-400 running-glow"
                    >Running</span
                  >
                </p>
              </div>

              <div
                class="rounded-2xl border border-slate-700/70 bg-slate-900/70 px-4 py-3"
              >
                <p class="text-xs text-slate-400 mb-1">Image</p>
                <p class="text-sm font-semibold">devops-workshop:latest</p>
                <p class="mt-3 text-xs text-slate-300 font-mono">
                  Base: alpine:latest
                </p>
              </div>

              <div
                class="rounded-2xl border border-slate-700/70 bg-slate-900/70 px-4 py-3"
              >
                <p class="text-xs text-slate-400 mb-1">Port</p>
                <p class="text-sm font-semibold">http://localhost:3000</p>
                <p class="mt-3 text-xs text-slate-300">
                  Container port
                  <span class="font-mono text-indigo-300">3000</span>
                </p>
              </div>
            </div>

            <div
              class="rounded-3xl border border-slate-700/70 bg-slate-900/80 p-5"
            >
              <h2 class="text-sm font-semibold text-slate-100 mb-2">
                Build Overview
              </h2>

              <div class="grid gap-3 sm:grid-cols-3 text-xs font-mono">
                <div
                  class="rounded-2xl bg-slate-950/40 border border-slate-800/80 p-3"
                >
                  <p class="text-[11px] text-slate-400 mb-1">BASE IMAGE</p>
                  <p class="text-sky-300">alpine:latest</p>
                </div>

                <div
                  class="rounded-2xl bg-slate-950/40 border border-slate-800/80 p-3"
                >
                  <p class="text-[11px] text-slate-400 mb-1">ENTRYPOINT</p>
                  <p class="text-emerald-300">yarn serve</p>
                </div>

                <div
                  class="rounded-2xl bg-slate-950/40 border border-slate-800/80 p-3"
                >
                  <p class="text-[11px] text-slate-400 mb-1">DEPENDENCY</p>
                  <p class="text-indigo-300">serve@14.2.5</p>
                </div>
              </div>
            </div>
          </div>

          <!-- RIGHT: LOGS -->
          <aside
            class="rounded-3xl border border-slate-700/70 bg-slate-950/80 p-4 sm:p-5 flex flex-col h-full"
          >
            <div class="flex items-center justify-between mb-3">
              <h2
                class="text-sm font-semibold text-slate-100 flex items-center gap-2"
              >
                <span
                  class="inline-flex h-6 w-6 items-center justify-center rounded-xl bg-slate-800/80 border border-slate-700/80 text-[11px] font-mono"
                >
                  LOG
                </span>
                Live Logs
              </h2>
            </div>

            <div
              class="relative flex-1 rounded-2xl bg-slate-950/90 border border-slate-800/80 p-3"
            >
              <pre
                id="log-output"
                class="mt-2 max-h-64 text-[11px] leading-relaxed text-slate-300 font-mono"
              ></pre>
            </div>
          </aside>
        </section>

        <!-- FOOTER -->
        <footer
          class="mt-10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-[11px] text-slate-500"
        >
          <p>
            docker build . -t
            <span class="text-sky-400">devops-workshop:latest</span>
          </p>
          <p class="font-mono">
            docker run -it -p
            <span class="text-emerald-400">3000:3000</span>
            devops-workshop:latest
          </p>
        </footer>
      </main>
    </div>

    <!-- LOG TYPING SCRIPT WITH CURSOR -->
    <script>
      const logs = [
        "[docker] INFO Step 1/5 : FROM alpine:latest",
        "[docker] INFO Step 2/5 : WORKDIR /app",
        "[docker] INFO Step 3/5 : RUN apk update && apk add yarn",
        "[docker] INFO Step 4/5 : COPY yarn.lock index.html package.json ./",
        "[docker] INFO Step 5/5 : RUN yarn install --frozen-lockfile",
        "",
        '[docker] INFO ENTRYPOINT ["yarn","serve"]',
        "",
        "[container] READY  Server running at http://0.0.0.0:3000",
        "[container] HINT   Try running: yarn test",
        "[container] TEST   Running tests...",
        "[container] TEST   All tests passing!",
      ];

      const output = document.getElementById("log-output");

      // Cursor element
      const cursor = document.createElement("span");
      cursor.className = "cursor";

      let line = 0;

      function typeLine() {
        if (line >= logs.length) return startIdleLogs();

        const text = logs[line];
        let idx = 0;

        const lineDiv = document.createElement("div");
        output.appendChild(lineDiv);

        function typeChar() {
          lineDiv.textContent = text.slice(0, idx);
          lineDiv.appendChild(cursor);

          idx++;
          output.scrollTop = output.scrollHeight;

          if (idx <= text.length) {
            setTimeout(typeChar, 10 + Math.random() * 40);
          } else {
            line++;
            setTimeout(typeLine, 200);
          }
        }

        typeChar();
      }

      typeLine();

      // Idle heartbeat logs
      function startIdleLogs() {
        setInterval(
          () => {
            const text =
              "[container] DEBUG heartbeat " +
              Math.random().toString(36).slice(2, 8);

            const div = document.createElement("div");
            output.appendChild(div);

            let idx = 0;
            function typeChar() {
              div.textContent = text.slice(0, idx);
              div.appendChild(cursor);
              idx++;
              output.scrollTop = output.scrollHeight;

              if (idx <= text.length) {
                setTimeout(typeChar, 10 + Math.random() * 40);
              }
            }
            typeChar();
          },
          4000 + Math.random() * 4000,
        );
      }
    </script>
  </body>
</html>
